

\usepackage{silence}
\usepackage{lipsum}
\usepackage{mhchem}  % Chemical symbols, such as CO_2
\usepackage{siunitx}
% \usepackage{xstring}

\usepackage{tikz}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{bbm}
\usepackage{enumerate}
\usepackage{svg}
\usepackage{transparent}
\usepackage{pdflscape}
\usepackage{fontawesome5}

\usepackage{float}
\usepackage{caption}
\captionsetup{format=plain, font=small, labelfont=bf}

\makeatletter
\AtBeginDocument{%
  % \newcommand{\doi}[1]{\textsc{doi}:~\href{http://dx.doi.org/#1}{\nolinkurl{#1}}}
  \newcommand{\doi}[1]{\mbox{\href{https://doi.org/#1}{\nolinkurl{doi:#1}}}}
  % "The official DOI Handbook explicitly states that DOIs should be displayed on screens and in print in the format doi:10.1000/182". (https://en.wikipedia.org/wiki/Digital_object_identifier#Display)
}
\makeatother

% Table spacing utils
% https://tex.stackexchange.com/a/381720
\newcommand{\midsepremove}{\aboverulesep = 0mm \belowrulesep = 0mm}
\newcommand{\midsepdefault}{\aboverulesep = 0.605mm \belowrulesep = 0.984mm}
\newcommand{\midsepsymmetric}{\aboverulesep = 0.605mm \belowrulesep = 0.605mm}

% Plural version of \autoref (\Autoref)
% https://tex.stackexchange.com/a/183682
\makeatletter
% define a macro \Autoref to allow multiple references to be passed to \autoref
\newcommand\Autoref[1]{\@first@ref#1,@}
\def\@throw@dot#1.#2@{#1}% discard everything after the dot
\def\@set@refname#1{%    % set \@refname to autoefname+s using \getrefbykeydefault
  \edef\@tmp{\getrefbykeydefault{#1}{anchor}{}}%
  \xdef\@tmp{\expandafter\@throw@dot\@tmp.@}%
  \ltx@IfUndefined{\@tmp autorefnameplural}%
      {\def\@refname{\@nameuse{\@tmp autorefname}s}}%
      {\def\@refname{\@nameuse{\@tmp autorefnameplural}}}%
}
\def\@first@ref#1,#2{%
  \ifx#2@\autoref{#1}\let\@nextref\@gobble% only one ref, revert to normal \autoref
  \else%
    \@set@refname{#1}%  set \@refname to autoref name
    \@refname~\ref{#1}% add autoefname and first reference
    \let\@nextref\@next@ref% push processing to \@next@ref
  \fi%
  \@nextref#2%
}
\def\@next@ref#1,#2{%
  \ifx#2@ and~\ref{#1}\let\@nextref\@gobble% at end: print and+\ref and stop
  \else, \ref{#1}% print  ,+\ref and continue
  \fi%
  \@nextref#2%
}

\makeatother

